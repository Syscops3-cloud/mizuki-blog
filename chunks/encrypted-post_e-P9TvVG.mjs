import { c as createComponent, m as maybeRenderHead, u as unescapeHTML, d as renderTemplate } from './astro/server_CFIJpBV_.mjs';

const html = () => "<p>This blog template is built with <a href=\"https://astro.build/\">Astro</a>. For the things that are not mentioned in this guide, you may find the answers in the <a href=\"https://docs.astro.build/\">Astro Docs</a>.</p>\n<section><h2 id=\"front-matter-of-posts\">Front-matter of Posts<a class=\"anchor\" href=\"#front-matter-of-posts\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"expressive-code\"><link rel=\"stylesheet\" href=\"/mizuki-blog/_astro/ec.xyvso.css\"><script type=\"module\" src=\"/mizuki-blog/_astro/ec.g1fg5.js\"></script><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:57ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My First Blog Post</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2023-09-09</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">description</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">This is the first post of my new Astro blog.</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">image</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">./cover.jpg</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">Foo</span><span style=\"--0:#24292E;--1:#E1E4E8\">, </span><span style=\"--0:#032F62;--1:#9ECBFF\">Bar</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">Front-end</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">8</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">draft</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">false</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">9</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th>Attribute</th><th>Description</th></tr></thead><tbody><tr><td><code>title</code></td><td>The title of the post.</td></tr><tr><td><code>published</code></td><td>The date the post was published.</td></tr><tr><td><code>pinned</code></td><td>Whether this post is pinned to the top of the post list.</td></tr><tr><td><code>description</code></td><td>A short description of the post. Displayed on index page.</td></tr><tr><td><code>image</code></td><td>The cover image path of the post.<br>1. Start with <code>http://</code> or <code>https://</code>: Use web image<br>2. Start with <code>/</code>: For image in <code>public</code> dir<br>3. With none of the prefixes: Relative to the markdown file</td></tr><tr><td><code>tags</code></td><td>The tags of the post.</td></tr><tr><td><code>category</code></td><td>The category of the post.</td></tr><tr><td><code>permalink</code></td><td>Custom permalink for the post. The post will be accessible at <code>/posts/{permalink}/</code>. Example: <code>my-special-article</code> (will be available at <code>/posts/my-special-article/</code>)</td></tr><tr><td><code>licenseName</code></td><td>The license name for the post content.</td></tr><tr><td><code>author</code></td><td>The author of the post.</td></tr><tr><td><code>sourceLink</code></td><td>The source link or reference for the post content.</td></tr><tr><td><code>draft</code></td><td>If this post is still a draft, which won’t be displayed.</td></tr></tbody></table></section>\n<section><h2 id=\"where-to-place-the-post-files\">Where to Place the Post Files<a class=\"anchor\" href=\"#where-to-place-the-post-files\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>Your post files should be placed in <code>src/content/posts/</code> directory. You can also create sub-directories to better organize your posts and assets.</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"plaintext\" class=\"wrap\" style=\"--ecMaxLine:18ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">src/content/posts/</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">├── post-1.md</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#24292e;--1:#e1e4e8\">└── post-2/</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">├── cover.png</span></div></div><div class=\"ec-line\" style=\"--ecIndent:4ch\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span class=\"indent\"><span style=\"--0:#24292e;--1:#e1e4e8\">    </span></span><span style=\"--0:#24292e;--1:#e1e4e8\">└── index.md</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div></section>\n<section><h2 id=\"custom-permalink\">Custom Permalink<a class=\"anchor\" href=\"#custom-permalink\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><p>You can set a custom permalink for any post by adding the <code>permalink</code> field to the front-matter:</p><div class=\"expressive-code\"><figure class=\"frame\"><figcaption class=\"header\"></figcaption><pre data-language=\"yaml\" class=\"wrap\" style=\"--ecMaxLine:31ch\"><code><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">1</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">2</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">title</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">My Special Article</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">3</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">published</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#005CC5;--1:#79B8FF\">2024-01-15</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">4</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">permalink</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"my-special-article\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">5</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">tags</span><span style=\"--0:#24292E;--1:#E1E4E8\">: [</span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Example\"</span><span style=\"--0:#24292E;--1:#E1E4E8\">]</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">6</div></div><div class=\"code\"><span style=\"--0:#1E7734;--1:#85E89D\">category</span><span style=\"--0:#24292E;--1:#E1E4E8\">: </span><span style=\"--0:#032F62;--1:#9ECBFF\">\"Technology\"</span></div></div><div class=\"ec-line\"><div class=\"gutter\"><div class=\"ln\" aria-hidden=\"true\">7</div></div><div class=\"code\"><span style=\"--0:#6F42C1;--1:#B392F0\">---</span></div></div></code><button class=\"copy-btn\" aria-label=\"Copy code\"><div class=\"copy-btn-icon\"><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon copy-icon\"><path d=\"M368.37-237.37q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-474.26q0-34.48 24.26-58.74 24.26-24.26 58.74-24.26h378.26q34.48 0 58.74 24.26 24.26 24.26 24.26 58.74v474.26q0 34.48-24.26 58.74-24.26 24.26-58.74 24.26H368.37Zm0-83h378.26v-474.26H368.37v474.26Zm-155 238q-34.48 0-58.74-24.26-24.26-24.26-24.26-58.74v-515.76q0-17.45 11.96-29.48 11.97-12.02 29.33-12.02t29.54 12.02q12.17 12.03 12.17 29.48v515.76h419.76q17.45 0 29.48 11.96 12.02 11.97 12.02 29.33t-12.02 29.54q-12.03 12.17-29.48 12.17H213.37Zm155-238v-474.26 474.26Z\"></path></svg><svg viewBox=\"0 -960 960 960\" xmlns=\"http://www.w3.org/2000/svg\" class=\"copy-btn-icon success-icon\"><path d=\"m389-377.13 294.7-294.7q12.58-12.67 29.52-12.67 16.93 0 29.61 12.67 12.67 12.68 12.67 29.53 0 16.86-12.28 29.14L419.07-288.41q-12.59 12.67-29.52 12.67-16.94 0-29.62-12.67L217.41-430.93q-12.67-12.68-12.79-29.45-.12-16.77 12.55-29.45 12.68-12.67 29.62-12.67 16.93 0 29.28 12.67L389-377.13Z\"></path></svg></div></button></pre></figure></div><p>When a custom permalink is set:</p><ul>\n<li>The post will be accessible at the custom URL (e.g., <code>/posts/my-special-article/</code>)</li>\n<li>The default <code>/posts/{slug}/</code> URL will still work</li>\n<li>RSS/Atom feeds will use the custom permalink</li>\n<li>All internal links will automatically use the custom permalink</li>\n</ul><p><strong>Important Notes:</strong></p><ul>\n<li>Permalinks should NOT include <code>/posts/</code> prefix (it will be added automatically)</li>\n<li>Avoid special characters and spaces in permalinks</li>\n<li>Use lowercase letters and hyphens for best SEO practices</li>\n<li>Make sure permalinks are unique across all posts</li>\n<li>Don’t include leading or trailing slashes</li>\n</ul></section>\n<section><h2 id=\"how-it-works\">How It Works<a class=\"anchor\" href=\"#how-it-works\"><span class=\"anchor-icon\" data-pagefind-ignore=\"\">#</span></a></h2><div class=\"mermaid-diagram-container\"><div class=\"mermaid-wrapper\" id=\"mermaid-wph28h\"><div class=\"mermaid\" data-mermaid-code=\"graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]\">graph LR\n    A[User Password] --> B[bcrypt Hash]\n    B --> C[Password Hash]\n    C --> D[Extract First 32 Characters]\n    D --> E[Encryption Key]\n    E --> F[AES Encryption]\n    F --> G[Encrypted Content]</div></div><script type=\"text/javascript\">(() => {\n\t// 单例模式：检查是否已经初始化过\n\tif (window.mermaidInitialized) {\n\t\treturn;\n\t}\n\n\twindow.mermaidInitialized = true;\n\n\t// 记录当前主题状态，避免不必要的重新渲染\n\tlet currentTheme = null;\n\tlet isRendering = false; // 防止并发渲染\n\tlet retryCount = 0;\n\tconst MAX_RETRIES = 3;\n\tconst RETRY_DELAY = 1000; // 1秒\n\n\t// 检查主题是否真的发生了变化\n\tfunction hasThemeChanged() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tconst newTheme = isDark ? \"dark\" : \"default\";\n\n\t\tif (currentTheme !== newTheme) {\n\t\t\tcurrentTheme = newTheme;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// 等待 Mermaid 库加载完成\n\tfunction waitForMermaid(timeout = 10000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\n\t\t\tfunction check() {\n\t\t\t\tif (window.mermaid && typeof window.mermaid.initialize === \"function\") {\n\t\t\t\t\tresolve(window.mermaid);\n\t\t\t\t} else if (Date.now() - startTime > timeout) {\n\t\t\t\t\treject(new Error(\"Mermaid library failed to load within timeout\"));\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(check, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcheck();\n\t\t});\n\t}\n\n\t// 设置 MutationObserver 监听 html 元素的 class 属性变化\n\tfunction setupMutationObserver() {\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tif (\n\t\t\t\t\tmutation.type === \"attributes\" &&\n\t\t\t\t\tmutation.attributeName === \"class\"\n\t\t\t\t) {\n\t\t\t\t\t// 检查是否是 dark 类的变化\n\t\t\t\t\tconst target = mutation.target;\n\t\t\t\t\tconst wasDark = mutation.oldValue\n\t\t\t\t\t\t? mutation.oldValue.includes(\"dark\")\n\t\t\t\t\t\t: false;\n\t\t\t\t\tconst isDark = target.classList.contains(\"dark\");\n\n\t\t\t\t\tif (wasDark !== isDark) {\n\t\t\t\t\t\tif (hasThemeChanged()) {\n\t\t\t\t\t\t\t// 延迟渲染，避免主题切换时的闪烁\n\t\t\t\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 150);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// 开始观察 html 元素的 class 属性变化\n\t\tobserver.observe(document.documentElement, {\n\t\t\tattributes: true,\n\t\t\tattributeFilter: [\"class\"],\n\t\t\tattributeOldValue: true,\n\t\t});\n\t}\n\n\t// 缩放平移\n\tfunction attachZoomControls(element, svgElement) {\n\t\tif (element.__zoomAttached) return;\n\t\telement.__zoomAttached = true;\n\n\t\tconst wrapper = document.createElement(\"div\");\n\t\twrapper.className = \"mermaid-zoom-wrapper\";\n\n\t\tconst svgParent = svgElement.parentNode;\n\t\twrapper.appendChild(svgElement);\n\t\tsvgParent.appendChild(wrapper);\n\n\t\tlet scale = 1;\n\t\tlet tx = 0;\n\t\tlet ty = 0;\n\t\tconst MIN_SCALE = 0.2;\n\t\tconst MAX_SCALE = 6;\n\n\t\tfunction applyTransform() {\n\t\t\twrapper.style.transform = `translate(${tx}px, ${ty}px) scale(${scale})`;\n\t\t}\n\t\tconst controls = document.createElement(\"div\");\n\t\tcontrols.className = \"mermaid-zoom-controls\";\n\t\tcontrols.innerHTML = `\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-in\" title=\"Zoom in\">+</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"zoom-out\" title=\"Zoom out\">−</button>\n\t\t\t<button class=\"btn-regular rounded-lg h-10 w-10 active:scale-90\" data-action=\"reset\" title=\"Reset\">⤾</button>\n\t\t`;\n\t\telement.appendChild(controls);\n\n\t\tcontrols.addEventListener(\"click\", (ev) => {\n\t\t\tconst action =\n\t\t\t\tev.target.getAttribute && ev.target.getAttribute(\"data-action\");\n\t\t\tif (!action) return;\n\n\t\t\tswitch (action) {\n\t\t\t\tcase \"zoom-in\":\n\t\t\t\t\tscale = Math.min(MAX_SCALE, +(scale * 1.2).toFixed(3));\n\t\t\t\t\tapplyTransform();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"zoom-out\":\n\t\t\t\t\tscale = Math.max(MIN_SCALE, +(scale / 1.2).toFixed(3));\n\t\t\t\t\tapplyTransform();\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"reset\":\n\t\t\t\t\tscale = 1;\n\t\t\t\t\ttx = 0;\n\t\t\t\t\tty = 0;\n\t\t\t\t\tapplyTransform();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tlet isPanning = false;\n\t\tlet startX = 0;\n\t\tlet startY = 0;\n\t\tlet startTx = 0;\n\t\tlet startTy = 0;\n\n\t\twrapper.style.touchAction = \"none\";\n\n\t\twrapper.addEventListener(\"pointerdown\", (ev) => {\n\t\t\tif (ev.button !== 0) return; // 仅左键\n\t\t\tisPanning = true;\n\t\t\twrapper.setPointerCapture(ev.pointerId);\n\t\t\tstartX = ev.clientX;\n\t\t\tstartY = ev.clientY;\n\t\t\tstartTx = tx;\n\t\t\tstartTy = ty;\n\t\t});\n\n\t\twrapper.addEventListener(\"pointermove\", (ev) => {\n\t\t\tif (!isPanning) return;\n\t\t\tconst dx = ev.clientX - startX;\n\t\t\tconst dy = ev.clientY - startY;\n\t\t\ttx = startTx + dx / scale; // 根据当前缩放调整灵敏度\n\t\t\tty = startTy + dy / scale;\n\t\t\tapplyTransform();\n\t\t});\n\n\t\twrapper.addEventListener(\"pointerup\", (ev) => {\n\t\t\tisPanning = false;\n\t\t\ttry {\n\t\t\t\twrapper.releasePointerCapture(ev.pointerId);\n\t\t\t} catch (e) {}\n\t\t});\n\n\t\twrapper.addEventListener(\"pointercancel\", () => {\n\t\t\tisPanning = false;\n\t\t});\n\n\t\t// 鼠标滚轮缩放\n\t\telement.addEventListener(\n\t\t\t\"wheel\",\n\t\t\t(ev) => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tconst delta = -ev.deltaY;\n\t\t\t\tconst zoomFactor = delta > 0 ? 1.12 : 1 / 1.12;\n\t\t\t\tconst prevScale = scale;\n\t\t\t\tscale = Math.min(\n\t\t\t\t\tMAX_SCALE,\n\t\t\t\t\tMath.max(MIN_SCALE, +(scale * zoomFactor).toFixed(3)),\n\t\t\t\t);\n\n\t\t\t\tconst rect = wrapper.getBoundingClientRect();\n\t\t\t\tconst cx = ev.clientX - rect.left;\n\t\t\t\tconst cy = ev.clientY - rect.top;\n\n\t\t\t\tconst worldX = cx / prevScale - tx;\n\t\t\t\tconst worldY = cy / prevScale - ty;\n\n\t\t\t\ttx = cx / scale - worldX;\n\t\t\t\tty = cy / scale - worldY;\n\n\t\t\t\tapplyTransform();\n\t\t\t},\n\t\t\t{ passive: false },\n\t\t);\n\n\t\t// 双击重置\n\t\twrapper.addEventListener(\"dblclick\", () => {\n\t\t\tscale = 1;\n\t\t\ttx = 0;\n\t\t\tty = 0;\n\t\t\tapplyTransform();\n\t\t});\n\t\tapplyTransform();\n\t\tlet resizeTimer = null;\n\t\twindow.addEventListener(\"resize\", () => {\n\t\t\tclearTimeout(resizeTimer);\n\t\t\tresizeTimer = setTimeout(() => {\n\t\t\t\tapplyTransform();\n\t\t\t}, 200);\n\t\t});\n\t}\n\n\t// 设置其他事件监听器\n\tfunction setupEventListeners() {\n\t\t// 监听页面切换\n\t\tdocument.addEventListener(\"astro:page-load\", () => {\n\t\t\t// 重新初始化主题状态\n\t\t\tcurrentTheme = null;\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t\tif (hasThemeChanged()) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 100);\n\t\t\t}\n\t\t});\n\n\t\t// 监听页面可见性变化，页面重新可见时重新渲染\n\t\tdocument.addEventListener(\"visibilitychange\", () => {\n\t\t\tif (!document.hidden) {\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync function initializeMermaid() {\n\t\ttry {\n\t\t\tawait waitForMermaid();\n\n\t\t\t// 初始化 Mermaid 配置\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: \"default\",\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\t// 添加错误处理配置\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 渲染所有 Mermaid 图表\n\t\t\tawait renderMermaidDiagrams();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid:\", error);\n\t\t\t// 如果初始化失败，尝试重新加载\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => initializeMermaid(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function renderMermaidDiagrams() {\n\t\t// 防止并发渲染\n\t\tif (isRendering) {\n\t\t\treturn;\n\t\t}\n\n\t\t// 检查 Mermaid 是否可用\n\t\tif (!window.mermaid || typeof window.mermaid.render !== \"function\") {\n\t\t\tconsole.warn(\"Mermaid not available, skipping render\");\n\t\t\treturn;\n\t\t}\n\n\t\tisRendering = true;\n\n\t\ttry {\n\t\t\tconst mermaidElements = document.querySelectorAll(\n\t\t\t\t\".mermaid[data-mermaid-code]\",\n\t\t\t);\n\n\t\t\tif (mermaidElements.length === 0) {\n\t\t\t\tisRendering = false;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 延迟检测主题，确保 DOM 已经更新\n\t\t\tawait new Promise((resolve) => setTimeout(resolve, 100));\n\n\t\t\tconst htmlElement = document.documentElement;\n\t\t\tconst isDark = htmlElement.classList.contains(\"dark\");\n\t\t\tconst theme = isDark ? \"dark\" : \"default\";\n\n\t\t\t// 更新 Mermaid 主题（只需要更新一次）\n\t\t\twindow.mermaid.initialize({\n\t\t\t\tstartOnLoad: false,\n\t\t\t\ttheme: theme,\n\t\t\t\tthemeVariables: {\n\t\t\t\t\tfontFamily: \"inherit\",\n\t\t\t\t\tfontSize: \"16px\",\n\t\t\t\t\t// 强制应用主题变量\n\t\t\t\t\tprimaryColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryTextColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tprimaryBorderColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tlineColor: isDark ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\tsecondaryColor: isDark ? \"#333333\" : \"#f0f0f0\",\n\t\t\t\t\ttertiaryColor: isDark ? \"#555555\" : \"#e0e0e0\",\n\t\t\t\t},\n\t\t\t\tsecurityLevel: \"loose\",\n\t\t\t\terrorLevel: \"warn\",\n\t\t\t\tlogLevel: \"error\",\n\t\t\t});\n\n\t\t\t// 批量渲染所有图表，添加重试机制\n\t\t\tconst renderPromises = Array.from(mermaidElements).map(\n\t\t\t\tasync (element, index) => {\n\t\t\t\t\tlet attempts = 0;\n\t\t\t\t\tconst maxAttempts = 3;\n\n\t\t\t\t\twhile (attempts < maxAttempts) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst code = element.getAttribute(\"data-mermaid-code\");\n\n\t\t\t\t\t\t\tif (!code) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 显示加载状态\n\t\t\t\t\t\t\telement.innerHTML =\n\t\t\t\t\t\t\t\t'<div class=\"mermaid-loading\">Rendering diagram...</div>';\n\n\t\t\t\t\t\t\t// 渲染图表\n\t\t\t\t\t\t\tconst { svg } = await window.mermaid.render(\n\t\t\t\t\t\t\t\t`mermaid-${Date.now()}-${index}-${attempts}`,\n\t\t\t\t\t\t\t\tcode,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\tconst doc = parser.parseFromString(svg, \"image/svg+xml\");\n\t\t\t\t\t\t\tconst svgElement = doc.documentElement;\n\n\t\t\t\t\t\t\telement.innerHTML = \"\";\n\t\t\t\t\t\t\telement.__zoomAttached = false;\n\t\t\t\t\t\t\telement.appendChild(svgElement);\n\n\t\t\t\t\t\t\t// 添加响应式支持\n\t\t\t\t\t\t\tconst insertedSvg = element.querySelector(\"svg\");\n\t\t\t\t\t\t\tif (insertedSvg) {\n\t\t\t\t\t\t\t\tinsertedSvg.setAttribute(\"width\", \"100%\");\n\t\t\t\t\t\t\t\tinsertedSvg.removeAttribute(\"height\");\n\t\t\t\t\t\t\t\tinsertedSvg.style.maxWidth = \"100%\";\n\t\t\t\t\t\t\t\tinsertedSvg.style.height = \"auto\";\n\t\t\t\t\t\t\t\t//Todo 需要根据实际情况\n\t\t\t\t\t\t\t\tinsertedSvg.style.minHeight = \"300px\";\n\n\t\t\t\t\t\t\t\t// 强制应用样式\n\t\t\t\t\t\t\t\tif (isDark) {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"brightness(0.9) contrast(1.1)\";\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsvgElement.style.filter = \"none\";\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tattachZoomControls(element, insertedSvg);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// 渲染成功，跳出重试循环\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tattempts++;\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Mermaid rendering attempt ${attempts} failed for element ${index}:`,\n\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (attempts >= maxAttempts) {\n\t\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t\t`Failed to render Mermaid diagram after ${maxAttempts} attempts:`,\n\t\t\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\telement.innerHTML = `\n\t\t\t\t\t\t\t\t\t<div class=\"mermaid-error\">\n\t\t\t\t\t\t\t\t\t\t<p>Failed to render diagram after ${maxAttempts} attempts.</p>\n\t\t\t\t\t\t\t\t\t\t<button onclick=\"location.reload()\" style=\"margin-top: 8px; padding: 4px 8px; background: var(--primary); color: white; border: none; border-radius: 4px; cursor: pointer;\">\n\t\t\t\t\t\t\t\t\t\t\tRetry Page\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 等待一段时间后重试\n\t\t\t\t\t\t\t\tawait new Promise((resolve) =>\n\t\t\t\t\t\t\t\t\tsetTimeout(resolve, 500 * attempts),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\n\t\t\t// 等待所有渲染完成\n\t\t\tawait Promise.all(renderPromises);\n\t\t\tretryCount = 0; // 重置重试计数\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error in renderMermaidDiagrams:\", error);\n\n\t\t\t// 如果渲染失败，尝试重新渲染\n\t\t\tif (retryCount < MAX_RETRIES) {\n\t\t\t\tretryCount++;\n\t\t\t\tsetTimeout(() => renderMermaidDiagrams(), RETRY_DELAY * retryCount);\n\t\t\t}\n\t\t} finally {\n\t\t\tisRendering = false;\n\t\t}\n\t}\n\n\t// 初始化主题状态\n\tfunction initializeThemeState() {\n\t\tconst isDark = document.documentElement.classList.contains(\"dark\");\n\t\tcurrentTheme = isDark ? \"dark\" : \"default\";\n\t}\n\n\t// 加载 Mermaid 库\n\tasync function loadMermaid() {\n\t\tif (typeof window.mermaid !== \"undefined\") {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement(\"script\");\n\t\t\tscript.src =\n\t\t\t\t\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\tscript.onload = () => {\n\t\t\t\tconsole.log(\"Mermaid library loaded successfully\");\n\t\t\t\tresolve();\n\t\t\t};\n\n\t\t\tscript.onerror = (error) => {\n\t\t\t\tconsole.error(\"Failed to load Mermaid library:\", error);\n\t\t\t\t// 尝试备用 CDN\n\t\t\t\tconst fallbackScript = document.createElement(\"script\");\n\t\t\t\tfallbackScript.src = \"https://unpkg.com/mermaid@11/dist/mermaid.min.js\";\n\n\t\t\t\tfallbackScript.onload = () => {\n\t\t\t\t\tconsole.log(\"Mermaid library loaded from fallback CDN\");\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\n\t\t\t\tfallbackScript.onerror = () => {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t\"Failed to load Mermaid from both primary and fallback CDNs\",\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t};\n\n\t\t\t\tdocument.head.appendChild(fallbackScript);\n\t\t\t};\n\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n\n\t// 主初始化函数\n\tasync function initialize() {\n\t\ttry {\n\t\t\t// 设置监听器\n\t\t\tsetupMutationObserver();\n\t\t\tsetupEventListeners();\n\n\t\t\t// 初始化主题状态\n\t\t\tinitializeThemeState();\n\n\t\t\t// 加载并初始化 Mermaid\n\t\t\tawait loadMermaid();\n\t\t\tawait initializeMermaid();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to initialize Mermaid system:\", error);\n\t\t}\n\t}\n\n\t// 启动初始化\n\tif (document.readyState === \"loading\") {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", initialize);\n\t} else {\n\t\tinitialize();\n\t}\n})();\n</script></div></section>";

				const frontmatter = {"title":"Encrypted Post","published":"2024-01-15T00:00:00.000Z","description":"This is an article for testing the page encryption feature","encrypted":true,"pinned":true,"password":"123456","permalink":"encrypted-example","tags":["Test","Encryption"],"category":"Technology","minutes":2,"words":336,"excerpt":"This blog template is built with Astro. For the things that are not mentioned in this guide, you may find the answers in the Astro Docs."};
				const file = "D:/lyf/blog/my_blog/src/content/posts/encrypted-post.md";
				const url = undefined;

				const Content = createComponent((result, _props, slots) => {
					const { layout, ...content } = frontmatter;
					content.file = file;
					content.url = url;

					return renderTemplate`${maybeRenderHead()}${unescapeHTML(html())}`;
				});

export { Content, Content as default, file, frontmatter, url };
